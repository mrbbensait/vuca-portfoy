# ğŸ“Š XPortfoy - Proje AnlatÄ±mÄ±

**Dijital PortfÃ¶y RÃ¶ntgeni**

> TÃ¼m varlÄ±klarÄ±nÄ±zÄ± tek platformda yÃ¶netin, paylaÅŸÄ±n ve takip edin

**Son GÃ¼ncelleme:** 25 Åubat 2026  
**Durum:** Aktif GeliÅŸtirme

---

## ğŸ“‹ Ä°Ã§indekiler

1. [Proje Ã–zeti](#-proje-Ã¶zeti)
2. [Ana Ã–zellikler](#-ana-Ã¶zellikler)
3. [Sistem Mimarisi](#-sistem-mimarisi)
4. [NasÄ±l Ã‡alÄ±ÅŸÄ±r](#-nasÄ±l-Ã§alÄ±ÅŸÄ±r)
5. [Admin YÃ¶netim Sistemi](#-admin-yÃ¶netim-sistemi)
6. [Performans ve GÃ¼venlik](#-performans-ve-gÃ¼venlik)
7. [VeritabanÄ± YapÄ±sÄ±](#-veritabanÄ±-yapÄ±sÄ±)
8. [Sosyal Platform](#-sosyal-platform)
9. [Gelecek Ã–zellikler](#-gelecek-Ã¶zellikler)

---

## ğŸ¯ Proje Ã–zeti

### Nedir?

**XPortfoy** (Dijital PortfÃ¶y RÃ¶ntgeni), TÃ¼rkiye'de ilk defa Ã§oklu piyasa varlÄ±klarÄ±nÄ±zÄ± tek platformda yÃ¶netmenizi, analiz etmenizi ve baÅŸkalarÄ±yla paylaÅŸmanÄ±zÄ± saÄŸlayan bir finans teknolojisi uygulamasÄ±dÄ±r.

### Hangi Problemi Ã‡Ã¶zÃ¼yor?

**Problem:**
- YatÄ±rÄ±mcÄ±lar BÄ°ST, Nasdaq, kripto ve dÃ¶viz yatÄ±rÄ±mlarÄ±nÄ± farklÄ± platformlarda takip ediyor
- Toplam portfÃ¶y deÄŸerini gÃ¶rmek iÃ§in manuel hesaplama gerekiyor
- Influencer'lar portfÃ¶ylerini ÅŸeffaf ÅŸekilde paylaÅŸamÄ±yor
- GÃ¼venilir portfÃ¶y takip araÃ§larÄ± eksik veya pahalÄ±

**Ã‡Ã¶zÃ¼m:**
- âœ… TÃ¼m varlÄ±klarÄ± tek platformda yÃ¶netme
- âœ… Otomatik fiyat gÃ¼ncellemeleri ve analiz
- âœ… PortfÃ¶y paylaÅŸÄ±mÄ± ve sosyal takip sistemi
- âœ… Ãœcretsiz ve kullanÄ±cÄ± dostu arayÃ¼z

### Kimler Ä°Ã§in?

1. **Bireysel YatÄ±rÄ±mcÄ±lar**
   - Ã‡oklu piyasada iÅŸlem yapan herkes
   - PortfÃ¶yÃ¼nÃ¼ profesyonelce yÃ¶netmek isteyenler
   - Kar/zarar takibi yapanlar

2. **Content Creator'lar (Influencer)**
   - Finans YouTuber'larÄ±
   - YatÄ±rÄ±m bloggerlarÄ±
   - PortfÃ¶yÃ¼nÃ¼ ÅŸeffaf paylaÅŸmak isteyen herkes

3. **TakipÃ§iler**
   - GÃ¼vendiÄŸi kiÅŸilerin portfÃ¶ylerini takip etmek isteyenler
   - YatÄ±rÄ±m eÄŸitimi almak isteyenler

---

## ğŸš€ Ana Ã–zellikler

### 1. ğŸ’¼ Ã‡oklu PortfÃ¶y YÃ¶netimi

**Ne YapÄ±yor:**
- SÄ±nÄ±rsÄ±z sayÄ±da portfÃ¶y oluÅŸturabilirsiniz
- Her portfÃ¶y tamamen izole (ayrÄ± varlÄ±klar, iÅŸlemler, notlar)
- Tek tÄ±kla portfÃ¶yler arasÄ±nda geÃ§iÅŸ

**KullanÄ±m Senaryosu:**
```
Ã–rnek:
- "Ana PortfÃ¶y" â†’ GerÃ§ek yatÄ±rÄ±mlarÄ±nÄ±z
- "Kripto PortfÃ¶y" â†’ Sadece kripto varlÄ±klar
- "Deneme PortfÃ¶y" â†’ Test amaÃ§lÄ± iÅŸlemler
```

### 2. ğŸ“Š Desteklenen VarlÄ±k TÃ¼rleri

**Mevcut Destek:**
- ğŸ‡¹ğŸ‡· **BÄ°ST Hisseleri** (Ã–rn: ASELS, THYAO, BIMAS)
- ğŸ‡ºğŸ‡¸ **ABD Hisseleri** (Ã–rn: AAPL, GOOGL, TSLA)
- â‚¿ **Kripto Paralar** (Ã–rn: BTC, ETH, SOL)
- ğŸ’µ **Nakit** (TRY, USD, EUR)

**NasÄ±l Ã‡alÄ±ÅŸÄ±r:**
- Otomatik fiyat Ã§ekimi (Yahoo Finance + Binance)
- GÃ¼ncel kurlar ve piyasa fiyatlarÄ±
- Sembol otomatik dÃ¼zeltme (BTC â†’ BTCUSDT)

### 3. ğŸ’° Ä°ÅŸlem YÃ¶netimi

**Ã–zellikler:**
- **AlÄ±ÅŸ Ä°ÅŸlemleri:** VarlÄ±k satÄ±n alma kaydÄ±
- **SatÄ±ÅŸ Ä°ÅŸlemleri:** VarlÄ±k satma ve kar/zarar hesaplama
- **Komisyon Takibi:** Ä°ÅŸlem Ã¼cretlerini dahil etme
- **Otomatik Holding Hesaplama:** Ortalama alÄ±ÅŸ fiyatÄ± (FIFO yÃ¶ntemi)

**Ä°ÅŸlem AkÄ±ÅŸÄ±:**
1. "Yeni Ä°ÅŸlem" butonuna tÄ±klayÄ±n
2. VarlÄ±k sembolÃ¼, miktar, fiyat girin
3. Ä°ÅŸlem otomatik olarak holding'leri gÃ¼nceller
4. GeÃ§miÅŸ iÅŸlemler saklanÄ±r
5. Ä°stenirse iÅŸlem silinebilir (geri alÄ±nÄ±r)

**DoÄŸrulama:**
- SatÄ±ÅŸ yapmadan Ã¶nce holding kontrolÃ¼
- Yetersiz miktar uyarÄ±sÄ±
- Olmayan varlÄ±k satÄ±ÅŸÄ±nÄ± engelleme

### 4. âš¡ AkÄ±llÄ± Fiyat Sistemi

**Teknik Ã–zellikler:**
- **Batch API:** 10 varlÄ±k = 1 API Ã§aÄŸrÄ±sÄ± (90% azalma)
- **Cache Sistemi:** 15 dakika TTL, otomatik yenileme
- **Rate Limiting:** 100 istek/saat/kullanÄ±cÄ±
- **Multi-Source:** Yahoo Finance + Binance API fallback

**Performans:**
```
Ã–nceki Sistem:
â†’ 10 varlÄ±k = 10 API Ã§aÄŸrÄ±sÄ± = 5 saniye
â†’ Her sayfa yenileme = 10 yeni Ã§aÄŸrÄ±

Yeni Sistem:
â†’ 10 varlÄ±k = 1 batch Ã§aÄŸrÄ± = 0.6 saniye (88% hÄ±zlÄ±)
â†’ Cache'den yÃ¼kleme = 0.05 saniye (99% hÄ±zlÄ±)
â†’ 5 dakika boyunca 0 dÄ±ÅŸ API Ã§aÄŸrÄ±sÄ±
```

### 5. ğŸ“ˆ PortfÃ¶y Analizi

**Metrikler:**
- **Toplam DeÄŸer:** TÃ¼m varlÄ±klarÄ±n gÃ¼ncel deÄŸeri
- **Kar/Zarar:** GerÃ§ekleÅŸmemiÅŸ kazanÃ§/kayÄ±p
- **YÃ¼zde Getiri:** Portfolio performansÄ±
- **VarlÄ±k DaÄŸÄ±lÄ±mÄ±:** Pasta grafiÄŸi ile gÃ¶rselleÅŸtirme
- **Asset Mix:** Hisse, kripto, nakit oranlarÄ±

**GÃ¶rselleÅŸtirme:**
- Pasta grafik (asset daÄŸÄ±lÄ±mÄ±)
- Zaman Ã§izgisi (geliÅŸtirmede)
- Kar/zarar trendi (geliÅŸtirmede)

### 6. ğŸ“ Not ve UyarÄ± Sistemi

**Not YÃ¶netimi:**
- **Pozisyon NotlarÄ±:** Belirli bir varlÄ±k iÃ§in not
- **HaftalÄ±k Notlar:** HaftalÄ±k strateji/dÃ¼ÅŸÃ¼nceler
- **Genel Notlar:** Portfolio ile ilgili tÃ¼m notlar

**Alert Sistemi:**
- Fiyat hedefi uyarÄ±larÄ± (henÃ¼z aktif deÄŸil)
- Portfolio deÄŸiÅŸim bildirimleri (planlÄ±)

### 7. ğŸŒ Sosyal PortfÃ¶y PaylaÅŸÄ±mÄ±

**Public PortfÃ¶y:**
- PortfÃ¶yÃ¼nÃ¼zÃ¼ herkese aÃ§Ä±k yapabilirsiniz
- Benzersiz URL (slug) ile paylaÅŸÄ±m
- AÃ§Ä±klama ve baÅŸlÄ±k ekleme

**KeÅŸfet SayfasÄ±:**
- TÃ¼m public portfÃ¶yleri gÃ¶rÃ¼ntÃ¼leme
- Arama ve filtreleme
- PopÃ¼ler portfÃ¶yler

**Takip Sistemi:**
- Ä°lgilendiÄŸiniz portfÃ¶yleri takip edin
- Takip ettiÄŸiniz portfÃ¶yler ayrÄ± sayfada
- TakipÃ§i sayÄ±sÄ± gÃ¶sterimi

**Aktivite Feed:**
- Takip ettiÄŸiniz portfÃ¶ylerdeki iÅŸlemler
- Yeni holding'ler
- Portfolio deÄŸiÅŸiklikleri
- Telegram bildirimleri (opsiyonel)

### 8. ğŸ“¢ Duyuru Sistemi

**Ã–zellikler:**
- PortfÃ¶y sahipleri duyuru yayÄ±nlayabilir
- TakipÃ§iler duyurularÄ± gÃ¶rÃ¼r
- BaÅŸlÄ±k + iÃ§erik desteÄŸi
- Zaman damgasÄ±

**KullanÄ±m:**
- Ã–nemli iÅŸlem aÃ§Ä±klamalarÄ±
- Strateji deÄŸiÅŸiklikleri
- TakipÃ§ilerle iletiÅŸim

### 9. ğŸ›¡ï¸ Admin Paneli (RBAC)

**Rol TabanlÄ± Yetkilendirme:**
- Super Admin rolÃ¼
- GranÃ¼ler izin sistemi
- KullanÄ±cÄ±lara rol atama/kaldÄ±rma

**YÃ¶netim Ã–zellikleri:**
- KullanÄ±cÄ± listesi ve detaylarÄ±
- PortfÃ¶y izleme
- Ä°ÅŸlem geÃ§miÅŸi gÃ¶rÃ¼ntÃ¼leme
- Sistem istatistikleri
- Denetim loglarÄ±

---

## ğŸ—ï¸ Sistem Mimarisi

### Teknoloji Stack

**Frontend:**
- **Framework:** Next.js 16 (App Router)
- **Dil:** TypeScript 5
- **Styling:** TailwindCSS 4
- **Ä°konlar:** Lucide React
- **Grafikler:** Recharts
- **State:** React Context + TanStack Query v5

**Backend:**
- **API:** Next.js API Routes (Serverless)
- **Runtime:** Node.js 20+
- **VeritabanÄ±:** Supabase (PostgreSQL 15)
- **Authentication:** Supabase Auth
- **Storage:** Supabase Storage (kullanÄ±ma hazÄ±r)
- **Real-time:** Supabase Realtime (kullanÄ±ma hazÄ±r)

**DÄ±ÅŸ Servisler:**
- **Fiyat Verileri:** Yahoo Finance API, Binance API
- **Bildirimler:** Telegram Bot API
- **Hosting:** Vercel (Ã¶nerilen)

### Mimari Katmanlar

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client (Browser / React)          â”‚
â”‚   - UI Components                   â”‚
â”‚   - Context Providers               â”‚
â”‚   - Custom Hooks                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   API Layer (Next.js Routes)        â”‚
â”‚   - /api/portfolios                 â”‚
â”‚   - /api/transactions               â”‚
â”‚   - /api/price/batch                â”‚
â”‚   - /api/admin/*                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database (Supabase/PostgreSQL)    â”‚
â”‚   - Row Level Security (RLS)        â”‚
â”‚   - Triggers & Functions            â”‚
â”‚   - Real-time Subscriptions         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   External APIs                     â”‚
â”‚   - Yahoo Finance (stocks)          â”‚
â”‚   - Binance (crypto)                â”‚
â”‚   - Telegram (notifications)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ NasÄ±l Ã‡alÄ±ÅŸÄ±r

### KullanÄ±cÄ± KaydÄ± ve GiriÅŸ

1. **KayÄ±t Olma:**
   - Email ve ÅŸifre ile kayÄ±t
   - Email doÄŸrulama (opsiyonel)
   - Otomatik profil oluÅŸturma (database trigger)
   - VarsayÄ±lan "Ana PortfÃ¶y" otomatik oluÅŸur

2. **GiriÅŸ:**
   - Email/ÅŸifre ile authentication
   - Supabase Auth token yÃ¶netimi
   - GÃ¼venli session yÃ¶netimi

### PortfÃ¶y OluÅŸturma

1. Navigation'daki portfÃ¶y seÃ§iciyi aÃ§
2. "Yeni PortfÃ¶y" butonuna tÄ±kla
3. PortfÃ¶y adÄ± gir (benzersiz olmalÄ±)
4. PortfÃ¶y oluÅŸturulur ve aktif hale gelir

### Ä°ÅŸlem Ekleme AkÄ±ÅŸÄ±

**AlÄ±ÅŸ Ä°ÅŸlemi:**
```
1. "Yeni Ä°ÅŸlem" â†’ AlÄ±ÅŸ seÃ§
2. Sembol gir (Ã¶rn: AAPL)
3. Miktar ve fiyat gir
4. Komisyon ekle (opsiyonel)
5. Tarih seÃ§
6. Ä°ÅŸlemi kaydet

â†’ Sistem ne yapar:
  - Transaction tablosuna kayÄ±t
  - Holding oluÅŸturur veya gÃ¼nceller
  - Ortalama alÄ±ÅŸ fiyatÄ± hesaplar
  - Aktivite kaydÄ± oluÅŸturur (public portfÃ¶yse)
  - Telegram bildirimi gÃ¶nderir (public portfÃ¶yse)
```

**SatÄ±ÅŸ Ä°ÅŸlemi:**
```
1. "Yeni Ä°ÅŸlem" â†’ SatÄ±ÅŸ seÃ§
2. Mevcut holdingleri kontrol et
3. SatÄ±ÅŸ miktarÄ± kontrol edilir
4. Yetersizse hata mesajÄ±

â†’ Sistem ne yapar:
  - Transaction kaydÄ±
  - Holding'den miktar dÃ¼ÅŸer
  - Holding 0 olursa silinir
  - Kar/zarar hesaplanÄ±r
  - Aktivite + bildirim (public portfÃ¶yse)
```

### Fiyat GÃ¼ncelleme MekanizmasÄ±

**Ä°lk YÃ¼kleme:**
```
1. KullanÄ±cÄ± dashboard'u aÃ§ar
2. Frontend tÃ¼m holdingleri toplar
3. Batch API'ye tek istek gÃ¶nderir
4. Backend her sembol iÃ§in:
   a. Cache'e bakar (15 dk iÃ§inde var mÄ±?)
   b. Varsa cache'den dÃ¶ner
   c. Yoksa dÄ±ÅŸ API'ye gider
   d. FiyatÄ± cache'e yazar
   e. KullanÄ±cÄ±ya dÃ¶ner
5. Frontend fiyatlarÄ± gÃ¶sterir
```

**Sonraki YÃ¼klemeler:**
```
1. KullanÄ±cÄ± sayfayÄ± yeniler
2. Batch API Ã§aÄŸrÄ±sÄ±
3. TÃ¼m fiyatlar cache'de â†’ 0.05 saniyede dÃ¶ner
4. 15 dakika sonra cache expire olur
5. Yeni istek gelince tekrar dÄ±ÅŸ API'ye gidilir
```

### Sosyal PaylaÅŸÄ±m AkÄ±ÅŸÄ±

**PortfÃ¶y PaylaÅŸma:**
```
1. PortfÃ¶y ayarlarÄ±na git
2. "Herkese AÃ§Ä±k Yap" switch'ini aÃ§
3. Benzersiz slug oluÅŸtur (Ã¶rn: "benim-portfoyum")
4. AÃ§Ä±klama ekle
5. Kaydet

â†’ PortfÃ¶y artÄ±k:
  - /p/benim-portfoyum URL'inde eriÅŸilebilir
  - KeÅŸfet sayfasÄ±nda gÃ¶rÃ¼nÃ¼r
  - Takip edilebilir
```

**Takip Etme:**
```
1. KeÅŸfet sayfasÄ±ndan portfÃ¶y bul
2. "Takip Et" butonuna tÄ±kla
3. Takip kaydÄ± oluÅŸur
4. PortfÃ¶y sahibinin takipÃ§i sayÄ±sÄ± artar
5. "Takip Ettiklerim" sayfasÄ±nda gÃ¶rÃ¼nÃ¼r
```

**Aktivite Feed:**
```
1. Public portfÃ¶yde yeni iÅŸlem yapÄ±lÄ±r
2. portfolio_activities tablosuna kayÄ±t
3. Telegram bildirimi gÃ¶nderilir (varsa)
4. TakipÃ§iler aktiviteyi "Takip Ettiklerim" sayfasÄ±nda gÃ¶rÃ¼r
```

---

## ğŸ‘¨â€ğŸ’¼ Admin YÃ¶netim Sistemi

### RBAC (Role-Based Access Control)

**Roller:**
- **Super Admin:** TÃ¼m izinler (`{"*": true}`)
- **Gelecek roller:** Moderator, Support, Analyst (hazÄ±r altyapÄ±)

**VeritabanÄ± YapÄ±sÄ±:**
- `roles` tablosu â†’ Rol tanÄ±mlarÄ±
- `user_roles` tablosu â†’ KullanÄ±cÄ±-rol iliÅŸkisi
- `admin_audit_log` â†’ TÃ¼m admin aksiyonlarÄ±

### Admin Panel Ã–zellikleri

**Dashboard:**
- Toplam kullanÄ±cÄ± sayÄ±sÄ±
- Toplam portfÃ¶y sayÄ±sÄ±
- Toplam iÅŸlem sayÄ±sÄ±
- Sistem saÄŸlÄ±ÄŸÄ± metrikleri

**KullanÄ±cÄ± YÃ¶netimi:**
- KullanÄ±cÄ± listesi (arama, filtreleme, sayfalama)
- KullanÄ±cÄ± detaylarÄ±:
  - Profil bilgileri
  - PortfÃ¶yleri
  - Aktif holding'ler
  - Son 50 iÅŸlem
  - AtanmÄ±ÅŸ roller
- Rol atama/kaldÄ±rma
- Super admin yapma

**PortfÃ¶y Ä°zleme:**
- TÃ¼m portfÃ¶yleri gÃ¶rÃ¼ntÃ¼leme
- Public/private durumu
- TakipÃ§i sayÄ±larÄ±
- VarlÄ±k detaylarÄ±

**Ä°ÅŸlem GeÃ§miÅŸi:**
- TÃ¼m kullanÄ±cÄ± iÅŸlemleri
- Filtreleme (sembol, kullanÄ±cÄ±, tarih)
- DetaylÄ± gÃ¶rÃ¼nÃ¼m

**Sistem YÃ¶netimi:**
- Cache istatistikleri
- API rate limit durumu
- Denetim loglarÄ±
- Hata raporlarÄ±

**Denetim LoglarÄ±:**
- TÃ¼m admin aksiyonlarÄ± kaydedilir
- Kim, ne zaman, ne yaptÄ±
- Hedef kullanÄ±cÄ±/kayÄ±t
- Metadata (ek bilgiler)

### GÃ¼venlik

**Authentication:**
- Normal kullanÄ±cÄ± giriÅŸi (Supabase Auth)
- Admin rolÃ¼ database'de kontrol edilir
- Middleware'de public/protected route ayrÄ±mÄ±

**Authorization:**
- Her API endpoint'de admin kontrolÃ¼
- `withAdminAuth` wrapper fonksiyonu
- `assertAdmin()` fonksiyonu
- `hasPermission()` granular kontrol

**Audit Trail:**
- Her admin aksiyonu loglanÄ±r
- Silinmez kayÄ±tlar
- Tarih damgasÄ± ve metadata

---

## ğŸ” Performans ve GÃ¼venlik

### Performans OptimizasyonlarÄ±

**1. AkÄ±llÄ± Cache Sistemi**
```
Ã–zellikler:
- 15 dakika TTL (Time To Live)
- Otomatik expire
- Database-level cache (Supabase)
- %80-90 cache hit rate

SonuÃ§:
- Ä°lk yÃ¼kleme: 0.6 saniye
- Cache'den: 0.05 saniye
- %88-99 hÄ±z artÄ±ÅŸÄ±
```

**2. Batch API**
```
Ã–ncesi: 10 varlÄ±k = 10 API Ã§aÄŸrÄ±sÄ±
SonrasÄ±: 10 varlÄ±k = 1 API Ã§aÄŸrÄ±sÄ±

Avantajlar:
- N+1 sorunu Ã§Ã¶zÃ¼ldÃ¼
- 90% daha az dÄ±ÅŸ API kullanÄ±mÄ±
- Paralel iÅŸleme
```

**3. Rate Limiting**
```
Limitler:
- /api/price/quote: 100 req/saat
- /api/price/batch: 50 req/saat
- KullanÄ±cÄ± bazlÄ± takip
- RPC fonksiyon ile kontrol

SonuÃ§: API kÃ¶tÃ¼ye kullanÄ±mÄ± engellendi
```

**4. Database OptimizasyonlarÄ±**
```
- Index'ler: symbol, user_id, portfolio_id
- Foreign key constraints
- CASCADE DELETE (veri tutarlÄ±lÄ±ÄŸÄ±)
- UNIQUE constraints (duplikasyon Ã¶nleme)
```

### GÃ¼venlik KatmanlarÄ±

**1. Authentication (Kimlik DoÄŸrulama)**
```
- Supabase Auth entegrasyonu
- Email/password
- Magic link (hazÄ±r)
- Session yÃ¶netimi
- Token refresh
```

**2. Authorization (Yetkilendirme)**
```
- Row Level Security (RLS)
- Her kullanÄ±cÄ± sadece kendi verilerine eriÅŸir
- Admin rolleri iÃ§in Ã¶zel politikalar
- Public portfÃ¶yler iÃ§in read-only eriÅŸim
```

**3. API Security**
```
- TÃ¼m endpoint'ler authenticated
- Rate limiting (kÃ¶tÃ¼ye kullanÄ±m Ã¶nleme)
- Input validation
- SQL injection korumasÄ± (parametrize queries)
- XSS korumasÄ± (Next.js built-in)
```

**4. RLS (Row Level Security) Ã–rnekleri**
```
portfolios tablosu:
â†’ SELECT: Kendi portfÃ¶yler + public portfÃ¶yler
â†’ INSERT/UPDATE/DELETE: Sadece kendi portfÃ¶yler

holdings tablosu:
â†’ SELECT: Kendi holdings + public portfÃ¶y holdings
â†’ Write: Sadece kendi holdings

transactions tablosu:
â†’ SELECT: Kendi iÅŸlemler + public portfÃ¶y iÅŸlemleri
â†’ Write: Sadece kendi iÅŸlemler

notes/alerts:
â†’ Tamamen private, asla public deÄŸil
```

**5. Data Privacy**
```
- Notlar asla paylaÅŸÄ±lmaz
- Alertler private
- Email adresleri gizli
- Profile privacy ayarlarÄ±
- PortfÃ¶y gizliye alÄ±ndÄ±ÄŸÄ±nda:
  â†’ Slug silinir
  â†’ Takipler silinir
  â†’ Aktivite kayÄ±tlarÄ± silinir
```

---

## ğŸ—„ï¸ VeritabanÄ± YapÄ±sÄ±

### Ana Tablolar

**1. users_public (KullanÄ±cÄ± Profilleri)**
```
Alanlar:
- id (UUID, auth.users ile baÄŸlÄ±)
- display_name (gÃ¶sterilen ad)
- bio (kÄ±sa aÃ§Ä±klama)
- avatar_url (profil resmi)
- is_profile_public (profil gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼)
- created_at, updated_at

Not: Otomatik trigger ile oluÅŸturulur
```

**2. portfolios (PortfÃ¶yler)**
```
Alanlar:
- id (UUID, primary key)
- user_id (sahibi)
- name (portfÃ¶y adÄ±)
- is_public (herkese aÃ§Ä±k mÄ±)
- slug (benzersiz URL)
- description (aÃ§Ä±klama)
- follower_count (takipÃ§i sayÄ±sÄ±, trigger ile gÃ¼ncellenir)

Constraints:
- UNIQUE (user_id, name) â†’ AynÄ± kullanÄ±cÄ± aynÄ± isimde 2 portfÃ¶y oluÅŸturamaz
- UNIQUE (slug) â†’ Her slug benzersiz
```

**3. holdings (Pozisyonlar)**
```
Alanlar:
- id
- portfolio_id (hangi portfÃ¶y)
- user_id (sahibi)
- symbol (sembol, Ã¶rn: AAPL)
- asset_type (TR_STOCK, US_STOCK, CRYPTO, CASH)
- quantity (miktar)
- avg_price (ortalama alÄ±ÅŸ fiyatÄ±)

Ä°liÅŸkiler:
- portfolios'a baÄŸlÄ± (CASCADE DELETE)
```

**4. transactions (Ä°ÅŸlemler)**
```
Alanlar:
- id
- portfolio_id
- user_id
- symbol
- asset_type
- side (BUY veya SELL)
- quantity (miktar)
- price (fiyat)
- fee (komisyon)
- date (iÅŸlem tarihi)
- note (not, opsiyonel)

Ä°liÅŸkiler:
- portfolios'a baÄŸlÄ± (CASCADE DELETE)
```

**5. price_cache (Fiyat Ã–nbelleÄŸi)**
```
Alanlar:
- symbol
- asset_type
- price
- currency
- expires_at (15 dk sonra)
- fetched_at
- source (YAHOO, BINANCE)

Constraints:
- UNIQUE (symbol, asset_type)
```

**6. api_rate_limits (Rate Limiting)**
```
Alanlar:
- user_id
- endpoint
- request_count
- window_start (saat baÅŸlangÄ±cÄ±)
- window_end

Fonksiyon: check_rate_limit(user_id, endpoint, max_requests, window_minutes)
```

### Sosyal Ã–zellikler TablolarÄ±

**7. portfolio_follows (Takip Sistemi)**
```
Alanlar:
- id
- follower_id (takip eden kullanÄ±cÄ±)
- portfolio_id (takip edilen portfÃ¶y)
- created_at

Constraints:
- UNIQUE (follower_id, portfolio_id)
- Follower count trigger ile gÃ¼ncellenir
```

**8. portfolio_activities (Aktivite Feed)**
```
Alanlar:
- id
- portfolio_id
- actor_id (iÅŸlemi yapan)
- type (NEW_TRADE, HOLDING_CLOSED, vb)
- title
- metadata (JSON, ek bilgiler)
- created_at

Not: Sadece public portfÃ¶yler iÃ§in
```

**9. portfolio_announcements (Duyurular)**
```
Alanlar:
- id
- portfolio_id
- user_id
- title
- content
- created_at
- updated_at

Not: PortfÃ¶y sahipleri duyuru yayÄ±nlayabilir
```

### Admin TablolarÄ±

**10. roles (Roller)**
```
Alanlar:
- id
- slug (super_admin, moderator, vb)
- name (gÃ¶rÃ¼nen ad)
- description
- permissions (JSONB, {"*": true} veya granular)
- is_system (sistem rolÃ¼, silinemez)
```

**11. user_roles (KullanÄ±cÄ±-Rol Ä°liÅŸkisi)**
```
Alanlar:
- id
- user_id
- role_id
- assigned_by (kim atadÄ±)
- assigned_at

Constraints:
- UNIQUE (user_id, role_id)
```

**12. admin_audit_log (Denetim LoglarÄ±)**
```
Alanlar:
- id
- admin_id (iÅŸlemi yapan admin)
- action (user_role_assigned, vb)
- target_type (user, portfolio, vb)
- target_id
- metadata (JSON)
- created_at

Not: Asla silinmez, sadece INSERT
```

### Database Triggers

**1. auto_create_profile**
```
Ne zaman: Yeni kullanÄ±cÄ± kaydolduÄŸunda
Ne yapar: users_public tablosuna profil oluÅŸturur
```

**2. increment_follower_count**
```
Ne zaman: Yeni takip yapÄ±ldÄ±ÄŸÄ±nda
Ne yapar: portfolios.follower_count +1
```

**3. decrement_follower_count**
```
Ne zaman: Takip bÄ±rakÄ±ldÄ±ÄŸÄ±nda
Ne yapar: portfolios.follower_count -1
```

---

## ğŸŒ Sosyal Platform

### Ã–zellikler

**1. PortfÃ¶y PaylaÅŸÄ±mÄ±**
- Public/private toggle
- Benzersiz slug (URL)
- AÃ§Ä±klama ve baÅŸlÄ±k
- SEO optimizasyonu

**2. KeÅŸfet SayfasÄ±**
- TÃ¼m public portfÃ¶yler
- Arama (portfÃ¶y adÄ±, aÃ§Ä±klama)
- SÄ±ralama (yeni, popÃ¼ler)
- Sayfalama

**3. Takip Sistemi**
- Takip et/takibi bÄ±rak butonu
- TakipÃ§i sayÄ±sÄ± gÃ¶sterimi
- "Takip Ettiklerim" sayfasÄ±
- Takip ettiÄŸin portfÃ¶yler listesi

**4. Aktivite Feed**
- Yeni iÅŸlemler
- Holding aÃ§ma/kapama
- GerÃ§ek zamanlÄ± gÃ¼ncelleme (planlÄ±)
- Telegram bildirimleri (opsiyonel)

**5. Profil SayfalarÄ±**
- KullanÄ±cÄ± profili (/profile/[id])
- Public portfÃ¶yler listesi
- Bio ve avatar (gelecek)
- Ä°statistikler

**6. Duyuru Sistemi**
- PortfÃ¶y sahipleri duyuru yayÄ±nlar
- TakipÃ§iler duyurularÄ± gÃ¶rÃ¼r
- BaÅŸlÄ±k + iÃ§erik
- Timestamp

### Telegram Entegrasyonu

**Aktivite Bildirimleri:**
```
Ã–rnek Mesaj:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŸ¢ BIST

"Benim PortfÃ¶y" portfÃ¶yÃ¼ne yeni bir iÅŸlem eklendi.

ğŸ“… 25 Åubat 2026 Â· 12:30
ğŸ“Œ ASELS

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ğŸ“Š PortfÃ¶yÃ¼ Ä°ncele] [ğŸŒ PortfÃ¶y RÃ¶ntgeni]
```

**Ã–zellikler:**
- Public portfÃ¶yler iÃ§in otomatik
- Inline butonlar (portfÃ¶y linki)
- Emoji ile kategori gÃ¶sterimi
- Temiz ve profesyonel format

---

## ğŸ”® Gelecek Ã–zellikler

### Faz 1: Stripe Entegrasyonu (YakÄ±nda)

**AmaÃ§:** PortfÃ¶y sahipleri Ã¼cretli abonelik sistemi

**Ã–zellikler:**
- Ãœcretli portfÃ¶y abonelikleri
- Influencer'lar gelir elde eder
- Platform komisyonu (%20 Ã¶nerilen)
- Stripe Checkout + webhook
- Customer Portal
- Abonelik yÃ¶netimi

**KullanÄ±m Senaryosu:**
```
1. Influencer portfÃ¶yÃ¼nÃ¼ premium yapar
2. AylÄ±k abonelik fiyatÄ± belirler (Ã¶rn: â‚º50)
3. TakipÃ§i abone olmak ister
4. Stripe ile Ã¶deme yapar
5. Premium iÃ§eriÄŸe eriÅŸir
6. Influencer aylÄ±k gelir elde eder
```

### Faz 2: GeliÅŸmiÅŸ Analiz AraÃ§larÄ±

**Risk Metrikleri:**
- Sharpe Ratio (risk-adjusted return)
- Sortino Ratio (downside risk)
- Beta (piyasa volatilitesi)
- VaR (Value at Risk)

**Portfolio Optimization:**
- Modern Portfolio Theory
- Efficient frontier
- Rebalancing Ã¶nerileri
- Optimal allocation

**Benchmark KarÅŸÄ±laÅŸtÄ±rmasÄ±:**
- XU100 (BÄ°ST 100)
- S&P 500
- NASDAQ 100
- Bitcoin
- Alpha/Beta hesaplama

### Faz 3: Bildirim Sistemi

**Kanallar:**
- In-app bildirimler
- Browser push (OneSignal)
- Email bildirimleri (Resend/SendGrid)
- Mobile push (gelecekte)

**Bildirim Tipleri:**
- Yeni takipÃ§i
- Yeni iÅŸlem (takip ettiÄŸin portfÃ¶yler)
- Fiyat alertleri
- Abonelik durumu
- Sistem bildirimleri

### Faz 4: GeniÅŸletilmiÅŸ Piyasa DesteÄŸi

**Yeni VarlÄ±k TÃ¼rleri:**
- ğŸ‡ªğŸ‡º Avrupa BorsalarÄ± (DAX, FTSE, CAC40)
- ğŸ¥‡ Emtia (AltÄ±n gram/ons, GÃ¼mÃ¼ÅŸ, Petrol)
- ğŸ’± Forex DetaylÄ± (USDTRY, EURTRY, majÃ¶r Ã§iftler)
- ğŸ“ˆ ETF'ler
- ğŸ“Š Tahviller
- ğŸ’¼ YatÄ±rÄ±m FonlarÄ±

**API EntegrasyonlarÄ±:**
- Twelve Data API (global stocks)
- TCMB API (resmi dÃ¶viz kurlarÄ±)
- CoinGecko (crypto backup)

### Faz 5: Mobil Uygulama

**Platform:**
- React Native + Expo
- iOS ve Android
- Code sharing (%60-70)
- Push notification

**Ã–zellikler:**
- TÃ¼m web Ã¶zellikleri
- Mobile-first UI
- Offline mod (planlÄ±)
- Face ID / Touch ID

### Faz 6: Yapay Zeka Ã–zellikleri

**AI Portfolio Assistant:**
- OpenAI entegrasyonu
- DoÄŸal dil sorgularÄ±
- PortfÃ¶y analizi ve Ã¶neriler
- Risk deÄŸerlendirmesi
- YatÄ±rÄ±m fikirleri

**Ã–rnek KullanÄ±m:**
```
KullanÄ±cÄ±: "PortfÃ¶yÃ¼m Ã§ok riskli mi?"
AI: "PortfÃ¶yÃ¼nÃ¼zÃ¼n %70'i kripto varlÄ±klardan 
oluÅŸuyor, bu yÃ¼ksek volatilite demektir. 
Riskinizi azaltmak iÃ§in..."
```

### Faz 7: Advanced Features

**Portfolio Backtesting:**
- GeÃ§miÅŸ performans simÃ¼lasyonu
- What-if senaryolarÄ±
- Historical data analizi

**Sosyal Ã–zellikler:**
- KullanÄ±cÄ± arasÄ± mesajlaÅŸma
- Yorum sistemi
- Grup portfÃ¶yleri
- YatÄ±rÄ±m yarÄ±ÅŸmalarÄ±

**Community Features:**
- Forum/tartÄ±ÅŸma alanlarÄ±
- EÄŸitim iÃ§erikleri
- Webinar entegrasyonu
- Referral program

---

## ğŸ“Š Mevcut Durum ve Ä°statistikler

### Tamamlanan Ã–zellikler âœ…

- âœ… KullanÄ±cÄ± kaydÄ± ve giriÅŸ sistemi
- âœ… Ã‡oklu portfÃ¶y yÃ¶netimi
- âœ… Ä°ÅŸlem yÃ¶netimi (BUY/SELL)
- âœ… Otomatik holding hesaplama
- âœ… AkÄ±llÄ± fiyat sistemi (cache + batch)
- âœ… Rate limiting ve gÃ¼venlik
- âœ… PortfÃ¶y analizi (temel)
- âœ… Not ve alert sistemi (altyapÄ±)
- âœ… Sosyal portfÃ¶y paylaÅŸÄ±mÄ±
- âœ… Takip sistemi
- âœ… Aktivite feed
- âœ… Telegram bildirimleri
- âœ… Duyuru sistemi
- âœ… Admin paneli (RBAC)
- âœ… Denetim loglarÄ±

### GeliÅŸtirme AÅŸamasÄ±nda ğŸš§

- ğŸš§ GeliÅŸmiÅŸ analiz grafikleri
- ğŸš§ Real-time fiyat gÃ¼ncellemeleri
- ğŸš§ Alert tetikleme sistemi
- ğŸš§ Profil ayarlarÄ± (avatar, bio)

### Planlanan Ã–zellikler ğŸ“‹

- ğŸ“‹ Stripe entegrasyonu
- ğŸ“‹ Bildirim sistemi
- ğŸ“‹ GeniÅŸletilmiÅŸ piyasa desteÄŸi
- ğŸ“‹ Mobil uygulama
- ğŸ“‹ AI portfolio assistant
- ğŸ“‹ Advanced analytics

---

## ğŸ¨ KullanÄ±cÄ± Deneyimi

### TasarÄ±m Prensipleri

**1. Basitlik**
- Sade ve temiz arayÃ¼z
- Kolay navigasyon
- AÃ§Ä±k butonlar ve linkler

**2. Responsive Design**
- Mobil uyumlu
- Tablet desteÄŸi
- Desktop optimize

**3. Performans**
- HÄ±zlÄ± yÃ¼kleme
- Smooth animasyonlar
- Minimal gecikme

**4. Accessibility**
- Keyboard navigasyonu
- Screen reader uyumlu
- YÃ¼ksek kontrast (gelecek)

### Renkler ve Branding

**Ana Renkler:**
- Primary: KÄ±rmÄ±zÄ± (vurgu)
- Secondary: Gri tonlarÄ±
- Success: YeÅŸil (kar)
- Danger: KÄ±rmÄ±zÄ± (zarar)
- Warning: SarÄ± (uyarÄ±lar)

**Tipografi:**
- Clean sans-serif fontlar
- Okunabilir boyutlar
- HiyerarÅŸi net

---

## ğŸ”§ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma

### Gereksinimler

- Node.js 20+
- npm veya yarn
- Supabase hesabÄ±
- (Opsiyonel) Vercel hesabÄ±

### Environment Variables

```
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
NEXT_PUBLIC_APP_URL=
TELEGRAM_BOT_TOKEN= (opsiyonel)
TELEGRAM_CHANNEL_ID= (opsiyonel)
```

### Ã‡alÄ±ÅŸtÄ±rma

```bash
# BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kle
npm install

# Development server
npm run dev

# Production build
npm run build
npm start
```

### Database Setup

1. Supabase'de yeni proje oluÅŸtur
2. Migration dosyalarÄ±nÄ± sÄ±rayla Ã§alÄ±ÅŸtÄ±r
3. RLS politikalarÄ±nÄ± doÄŸrula
4. Service role key'i al

---

## ğŸ“ Notlar

### Ã–nemli Kurallar

1. **Notlar ve Alertler asla public olmaz** - her zaman private
2. **Write iÅŸlemleri sadece sahip** - takipÃ§iler read-only
3. **Slug benzersiz olmalÄ±** - TÃ¼rkÃ§e karakter desteÄŸi
4. **Rate limiting aktif** - kÃ¶tÃ¼ye kullanÄ±m Ã¶nleme
5. **Her faz baÄŸÄ±msÄ±z** - kademeli deploy

### GÃ¼venlik Best Practices

- Asla API key'leri commit etme
- Environment variables kullan
- RLS politikalarÄ±nÄ± test et
- Input validation her zaman
- Rate limiting monitÃ¶r et

### Performans Best Practices

- Cache'i akÄ±llÄ±ca kullan
- Batch API'leri tercih et
- Gereksiz re-render'larÄ± Ã¶nle
- Image optimizasyonu
- Bundle size dÃ¼ÅŸÃ¼k tut

---

## ğŸ“ Ä°letiÅŸim ve Destek

### GeliÅŸtirici

Proje: XPortfoy (Dijital PortfÃ¶y RÃ¶ntgeni)  
Durum: Aktif GeliÅŸtirme  
Tarih: 2026

### Teknoloji Stack Ã–zeti

- Frontend: Next.js 16 + TypeScript + TailwindCSS
- Backend: Next.js API Routes + Supabase
- Database: PostgreSQL 15 (Supabase)
- Hosting: Vercel (Ã¶nerilen)
- External: Yahoo Finance, Binance, Telegram

---

## ğŸ† SonuÃ§

**XPortfoy** (Dijital PortfÃ¶y RÃ¶ntgeni), TÃ¼rkiye'de ilk defa Ã§oklu piyasa varlÄ±klarÄ±nÄ± tek platformda yÃ¶netmenizi, analiz etmenizi ve sosyal olarak paylaÅŸmanÄ±zÄ± saÄŸlayan yenilikÃ§i bir fintech uygulamasÄ±dÄ±r.

**Temel Ã–zellikler:**
- âœ… Ã‡oklu portfÃ¶y yÃ¶netimi
- âœ… AkÄ±llÄ± fiyat sistemi (%90 performans artÄ±ÅŸÄ±)
- âœ… Sosyal paylaÅŸÄ±m ve takip
- âœ… Admin yÃ¶netim sistemi
- âœ… Enterprise-level gÃ¼venlik

**Gelecek Vizyon:**
- ğŸ”® Ãœcretli abonelik sistemi (Stripe)
- ğŸ”® GeliÅŸmiÅŸ analiz araÃ§larÄ±
- ğŸ”® Mobil uygulama
- ğŸ”® AI portfolio assistant

**Hedef:**
TÃ¼rkiye'de yatÄ±rÄ±mcÄ±larÄ±n gÃ¼venle kullanabileceÄŸi, ÅŸeffaf ve kullanÄ±cÄ± dostu bir portfÃ¶y yÃ¶netim ve sosyal yatÄ±rÄ±m platformu olmak.

---

**Bu belge, projenin teknik detaylarÄ±na girmeden genel iÅŸleyiÅŸini ve Ã¶zelliklerini anlatmaktadÄ±r. Kod Ã¶rnekleri ve implementasyon detaylarÄ± iÃ§in diÄŸer dokÃ¼mantasyon dosyalarÄ±na bakÄ±nÄ±z.**
